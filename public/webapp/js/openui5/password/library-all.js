/**
 * openui5-password - An OpenUI5 Control to allow you to check your password strength and validate it
 * @author Mauricio Lauffer
 * @version 0.0.1
 * @license MIT
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/library"],function(e){"use strict";var r={};return sap.ui.getCore().initLibrary({name:"openui5.password",dependencies:["sap.ui.core","sap.m"],interfaces:[],controls:["openui5.password.Password"],elements:[],noLibraryCSS:!0,version:"${version}"}),r.password},!1);
/**
 * openui5-password - An OpenUI5 Control to allow you to check your password strength and validate it
 * @author Mauricio Lauffer
 * @version 0.0.1
 * @license MIT
 */
sap.ui.define(["jquery.sap.global","sap/m/InputBase","sap/m/List","sap/m/ResponsivePopover","sap/m/StandardListItem","sap/ui/core/ValueState","./PasswordRenderer","./library","./thirdparty/zxcvbn"],function(e,t,r,o,s,i,a){"use strict";var n=t.extend("Password",{metadata:{library:"openui5.password",properties:{requireNumbers:{type:"boolean",group:"Behavior",defaultValue:!0},requireLetters:{type:"boolean",group:"Behavior",defaultValue:!0},requireSymbols:{type:"boolean",group:"Behavior",defaultValue:!0},requireLowercase:{type:"boolean",group:"Behavior",defaultValue:!0},requireUppercase:{type:"boolean",group:"Behavior",defaultValue:!0},maxLength:{type:"int",group:"Behavior",defaultValue:0},minLength:{type:"int",group:"Behavior",defaultValue:0},score:{type:"int",group:"Behavior",defaultValue:0}},aggregations:{errorItems:{type:"sap.m.StandardListItem",multiple:!0,singularName:"errorItem"}}},renderer:function(e,t){a.render(e,t)}});return n.prototype.init=function(){t.prototype.init.call(this),this._resourceBundle=sap.ui.getCore().getLibraryResourceBundle("openui5.password")},n.prototype.exit=function(){t.prototype.exit.call(this),this._popover&&(this._popover.destroy(),this._popover=null)},n.prototype.oninput=function(e){if(t.prototype.oninput.call(this,e),!e.isMarked("invalid")){var r=this._calculateScore(this._$input.val());this._setStatus(r),this.setScore(r)}},n.prototype.onfocusin=function(e){t.prototype.onfocusin.apply(this,arguments),this.$().addClass("sapMInputFocused"),this._popover&&this._popover.close()},n.prototype.onfocusout=function(e){t.prototype.onfocusout.apply(this,arguments),this.$().removeClass("sapMInputFocused"),this.closeValueStateMessage(this)},n.prototype.onsapfocusleave=function(e){this._showPasswordErrors(),t.prototype.onsapfocusleave.apply(this,arguments)},n.prototype.setWidth=function(e){return t.prototype.setWidth.call(this,e||"100%")},n.prototype.getWidth=function(){return this.getProperty("width")||"100%"},n.prototype._showPasswordErrors=function(){var e=this._getPasswordErrors(this._$input.val());e.length>0?(this._getPopover(e).openBy(this),this.setValueState(i.Error)):this.setValueState(i.Success)},n.prototype._getPopover=function(e){return this._popover||this._createPopover(),this._addPasswordErrorsToPopover(e||[]),this._popover},n.prototype._createPopover=function(){this._popover=new o(this.getId()+"-popover",{title:this._resourceBundle.getText("PASSWORD_POPUP_TITLE"),placement:"Vertical",icon:"sap-icon://alert"}),this._popover.addContent(new r({})),this.addDependent(this._popover)},n.prototype._addPasswordErrorsToPopover=function(e){var t=this._popover.getContent()[0];t.removeAllItems(),t.destroyItems(),e.forEach(function(e){t.addItem(e)})},n.prototype._getPasswordErrors=function(e){this.destroyAggregation("errorItems");var t=this,r=[],o=/\d/;return this.getRequireNumbers()&&!o.test(e)&&r.push(new s({title:this._resourceBundle.getText("PASSWORD_MUST_HAVE_NUMBER"),info:"[0-9]",infoState:i.Error})),o=/[a-zA-Z]/,this.getRequireLetters()&&!o.test(e)&&r.push(new s({title:this._resourceBundle.getText("PASSWORD_MUST_HAVE_LETTER"),info:"[a-z , A-Z]",infoState:i.Error})),o=/[a-z]/,this.getRequireLowercase()&&!o.test(e)&&r.push(new s({title:this._resourceBundle.getText("PASSWORD_MUST_HAVE_LOWERCASE_LETTER"),info:"[a-z]",infoState:i.Error})),o=/[A-Z]/,this.getRequireUppercase()&&!o.test(e)&&r.push(new s({title:this._resourceBundle.getText("PASSWORD_MUST_HAVE_UPPERCASE_LETTER"),info:"[A-Z]",infoState:i.Error})),o=/\W/,this.getRequireSymbols()&&!o.test(e)&&r.push(new s({title:this._resourceBundle.getText("PASSWORD_MUST_HAVE_SYMBOL"),info:"[!, @, #, $, %, &...]",infoState:i.Error})),this.getMinLength()>0&&e.length<this.getMinLength()&&r.push(new s({title:this._resourceBundle.getText("PASSWORD_MUST_HAVE_NOT_LESS"),info:this._resourceBundle.getText("PASSWORD_LIMIT_CHARACTERS",this.getMinLength()),infoState:i.Error})),this.getMaxLength()>0&&e.length>this.getMaxLength()&&r.push(new s({title:this._resourceBundle.getText("PASSWORD_MUST_HAVE_NOT_MORE"),info:this._resourceBundle.getText("PASSWORD_LIMIT_CHARACTERS",this.getMaxLength()),infoState:i.Error})),r.forEach(function(e){t.addAggregation("errorItems",e,!0)}),r},n.prototype._calculateScore=function(e){return!e||e.length<1?0:zxcvbn(e).score||0},n.prototype._setStatus=function(e){var t=this._getStatus(e);this.setValueState(t.state),this.setValueStateText(t.text)},n.prototype._getStatus=function(e){var t={state:i.None,text:""};switch(e){case 0:t={state:i.Error,text:this._resourceBundle.getText("PASSWORD_IS_VERY_WEAK")};break;case 1:t={state:i.Error,text:this._resourceBundle.getText("PASSWORD_IS_WEAK")};break;case 2:t={state:i.Warning,text:this._resourceBundle.getText("PASSWORD_IS_NOT_STRONG_ENOUGH")};break;case 3:t={state:i.Success,text:this._resourceBundle.getText("PASSWORD_IS_STRONG")};break;case 4:t={state:i.Success,text:this._resourceBundle.getText("PASSWORD_IS_VERY_STRONG")}}return t},n},!0);
/**
 * openui5-password - An OpenUI5 Control to allow you to check your password strength and validate it
 * @author Mauricio Lauffer
 * @version 0.0.1
 * @license MIT
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/Renderer","sap/m/InputBaseRenderer"],function(e,t,r){"use strict";var n=t.extend(r);return n.writeInnerAttributes=function(e,t){e.writeAttribute("type","password"),t.getEnabled()||e.writeAttribute("readonly","readonly")},n},!0);